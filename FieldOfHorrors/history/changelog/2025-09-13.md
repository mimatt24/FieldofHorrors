# Field of Horrors – Design Changelog
**Date:** 2025-09-13

This file records a complete account of today’s work (design docs, diagrams, repo/CI changes, and archival setup).  
For the full project digest, see `history/chat_archive.md`. For verbatim details, see `history/raw_logs/`.

---

## Repository & CI
- **CI simplified to Mermaid-only**: `.github/workflows/ci.yml` now renders all `design/**/*.mmd` to `art/autogen/*.png`, uploads as an artifact, and **auto-commits** the PNGs. PDF pipeline removed to avoid local PATH/engine friction.
- **Mermaid rendering reliability pass**:
  - Enforced **one edge per line** and **quoted labels** across diagrams.
  - Replaced `%` with `pct` (or kept `%` only inside quotes) to avoid parser errors.
  - Fixed `flow.mmd` and `point_guard_skilltree.mmd` parse errors (split statements; quoted labels).
- **.gitignore update (local)** to keep `art/autogen/` and `docs/out/` from polluting commits (CI still auto-commits its own outputs).

## Knowledge Portability & Archiving
- **Master archive added**: `history/chat_archive.md` (start-to-finish project reference: identity, classes, enemies, weapons, stages, base, boss, flows, leaderboards, ascension, UI/HUD, repo/CI).
- **Raw logs system**:
  - `history/raw_logs/README.md` (how to capture logs),
  - `history/raw_logs/session_template.md`,
  - **First verbatim log**: `history/raw_logs/session_2025-09-13.md`,
  - Helper script: `tools/add_log.sh` (quick append for USER/ASSISTANT blocks).
- **Archive cross-link**: `history/chat_archive.md` now links to the first raw log.

## Design – Systems & Docs
- **Flow of a run**: `design/flow.mmd` finalized (Main Menu → Class/Subclass → Mode → Run → Boss Gate → Boss → Rewards/Base → Ascension → Leaderboard → Season rollover). Parser fixes applied.
- **Enemy design**:
  - **Variations** locked with mechanics (not just cosmetics): Foam Finger, Mascot Mask, Referee, Tailgate Bruiser, Streaker, Cheerleader, Ultra Fan, Merch Seller.
  - **Elite Modifiers** doc: `design/enemy_elite_mods.md` (Overtime, Thick Skin, Explosive, Fanatic, Conductor, Flagbearer, T-Shirt Cannon, Mascot Shell; tuning & stacking rules).
  - **Spawn Curves**: `design/enemy_spawn_curves.md` (Curve A linear + elite pulses; Curve B wavey; Curve C hazard-driven; 5–10 min rhythm).
- **Weapons**:
  - **Deterministic trees** (Mermaid):
    - `design/weapon_trees/foam_finger_pike.mmd`
    - `design/weapon_trees/whistle_bomb_tree.mmd`
    - `design/weapon_trees/goalpost_boomerang.mmd`
    - `design/weapon_trees/mascot_maul_tree.mmd`
  - **Balance baselines**: `design/weapon_balance.md` (melee > ranged DPS; capstones +20–30% gated by mechanics).
- **Boss**:
  - **Referee King** spec: `design/bosses/referee_king.md` (P1 Flag Control, P2 Rulebook Rage, P3 Overtime Judgment; rewards; QA notes).
  - **Phase diagram**: `design/bosses/referee_king_phases.mmd` (auto-renders to PNG).
  - **Telegraphs table**: `design/bosses/referee_king_telegraphs.md` (timings/counters).
- **UI/HUD & Accessibility**:
  - `design/ui_hud.md` (Deck-friendly, large fonts, high contrast, icon+pattern for statuses, color-blind presets, options).
- **Stages & Hazards**:
  - `design/stages_hazards.md` (Firework Barrage, Bleacher Collapse, Spotlight Sweep, Tailgate Flames, Black Ice, Zamboni Cross, Loose Hoops, Shot Clock Alarm, Car Alarms, Lamp Flicker; arena mods; tuning bands).

## Classes & Skill Trees
- **Skill trees (Mermaid)** under `design/skilltrees/` (early→mid→capstone + debuff crystals):
  - Batter, Pitcher (labels quoted; `%` → `pct`), Linebacker, QB (quoted), **Point Guard (fixed)**, Center.
- **Telegraphs (new today)**:
  - `design/classes/telegraphs/point_guard.md` (dashes, no-look pass, auras, stuns, haste windows).
  - `design/classes/telegraphs/center.md` (box-out aura, hook shot, alley-oop, slam AOEs, reflect).
- **Mode & leaderboard decisions** reaffirmed:
  - Daily/weekly challenges; per-class boards + Hardcore Solo Self-Found and Hardcore Co-op.
  - Seasons (6-month) with optional reset; cosmetics carry; power resets via prestige rules.

## Art Direction & Palette
- **Locked 10-color palette** policy (with **one wild-card** per asset if iconic).
- Concept art previously produced (referenced/organized in repo): bloodied bat + ball; QB vs Zombies scene; **Base of Operations** (brightened) + schematic; regular zombie variants.  
  *Note:* All further concept art will adhere to the locked palette; any new color proposals require approval with a swatch.

## Open Items Carried Forward
- Add telegraph tables for **Pitcher, Batter, Linebacker, QB**.
- Author **Arena Challenge** templates (daily/weekly seed format + Mermaid card).
- Expand weapon trees (Whistle Bomb late tiers; Foam-Finger Pike variants).
- Stage-specific wave presets and hazard mixes per biome.
- Co-op synergy rules post-ascension.

---
